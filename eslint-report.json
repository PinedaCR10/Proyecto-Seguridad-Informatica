[{"filePath":"C:\\Users\\emman\\Desktop\\UNA\\ULTIMO SEMESTE\\SEGURIDAD INFORMATICA\\PROYECTO\\PROYECTO FINAL\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]},{"filePath":"C:\\Users\\emman\\Desktop\\UNA\\ULTIMO SEMESTE\\SEGURIDAD INFORMATICA\\PROYECTO\\PROYECTO FINAL\\server.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":14,"suggestions":[{"fix":{"range":[2337,2384],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":82,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":82,"endColumn":16,"suggestions":[{"fix":{"range":[2453,2472],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use strict\";\r\n\r\n// Imports\r\nconst express = require(\"express\");\r\nconst session = require(\"express-session\");\r\nconst ExpressOIDC = require(\"@okta/oidc-middleware\").ExpressOIDC;\r\nconst { auth } = require(\"express-openid-connect\");\r\nconst { requiresAuth } = require(\"express-openid-connect\");\r\nconst cons = require(\"consolidate\");\r\nconst path = require(\"path\");\r\nconst app = express();\r\n\r\n// Globals\r\nconst OKTA_ISSUER_URI = \"https://una-infosec.us.auth0.com/\";\r\nconst OKTA_CLIENT_ID = \"mlIokKRjb5CGf8FbKpDIOKE36e7BjDLA\";\r\nconst OKTA_CLIENT_SECRET = \"h8KznysLFpC2QHJHwTb_GDE1cnIesddtvURO-Yns_DQEYIJVG33QdeGOa8Bq7aWr\";\r\nconst REDIRECT_URI = \"http://localhost:3000/dashboard\";\r\nconst PORT = process.env.PORT || \"3000\";\r\nconst SECRET = \"hjsadfghjakshdfg87sd8f76s8d7f68s7f632342ug44gg423636346f\"; // Dejar el secret así como está.\r\n\r\n//  Esto se los dará Okta.\r\nconst config = {\r\n  authRequired: false,\r\n  auth0Logout: true,\r\n  secret: SECRET,\r\n  baseURL: \"http://localhost:3000\",\r\n  clientID: \"mlIokKRjb5CGf8FbKpDIOKE36e7BjDLA\",\r\n  issuerBaseURL: \"https://una-infosec.us.auth0.com\"\r\n};\r\n\r\nconst oidc = new ExpressOIDC({\r\n  issuer: OKTA_ISSUER_URI,\r\n  client_id: OKTA_CLIENT_ID,\r\n  client_secret: OKTA_CLIENT_SECRET,\r\n  redirect_uri: REDIRECT_URI,\r\n  routes: { callback: { defaultRedirect: \"http://localhost:3000/dashboard\" } },\r\n  scope: \"openid profile\"\r\n});\r\n\r\n// auth router attaches /login, /logout, and /callback routes to the baseURL\r\napp.use(auth(config));\r\n\r\n// MVC View Setup\r\napp.engine(\"html\", cons.swig);\r\napp.set(\"views\", path.join(__dirname, \"views\"));\r\napp.set(\"models\", path.join(__dirname, \"models\"));\r\napp.set(\"view engine\", \"html\");\r\n\r\n// App middleware\r\napp.use(\"/static\", express.static(\"static\"));\r\n\r\napp.use(session({\r\n  cookie: { httpOnly: true },\r\n  secret: SECRET\r\n}));\r\n\r\n// App routes\r\napp.use(oidc.router);\r\n\r\napp.get(\"/\",  (req, res) => {\r\n  res.render(\"index\");  \r\n});\r\n\r\napp.get(\"/dashboard\", requiresAuth() ,(req, res) => {  \r\n  // if(req.oidc.isAuthenticated())\r\n  // {\r\n  const payload = Buffer.from(req.appSession.id_token.split(\".\")[1], \"base64\").toString(\"utf-8\");\r\n  const userInfo = JSON.parse(payload);\r\n  res.render(\"dashboard\", { user: userInfo });\r\n  //}\r\n});\r\n\r\nconst openIdClient = require(\"openid-client\");\r\nopenIdClient.Issuer.defaultHttpOptions.timeout = 20000;\r\n\r\noidc.on(\"ready\", () => {\r\n  console.log(\"Server running on port: \" + PORT);\r\n  app.listen(parseInt(PORT));\r\n});\r\n\r\noidc.on(\"error\", err => {\r\n  console.error(err);\r\n});","usedDeprecatedRules":[{"ruleId":"semi","replacedBy":["@stylistic/semi"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"semi","url":"https://eslint.style/rules/semi"}}]}},{"ruleId":"quotes","replacedBy":["@stylistic/quotes"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"quotes","url":"https://eslint.style/rules/quotes"}}]}},{"ruleId":"indent","replacedBy":["@stylistic/indent"],"info":{"message":"Formatting rules are being moved out of ESLint core.","url":"https://eslint.org/blog/2023/10/deprecating-formatting-rules/","deprecatedSince":"8.53.0","availableUntil":"11.0.0","replacedBy":[{"message":"ESLint Stylistic now maintains deprecated stylistic core rules.","url":"https://eslint.style/guide/migration","plugin":{"name":"@stylistic/eslint-plugin","url":"https://eslint.style"},"rule":{"name":"indent","url":"https://eslint.style/rules/indent"}}]}}]}]